<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti√≥n de Arbitraje</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .nav-tabs {
            <button class="tab-btn" onclick="cambiarPesta√±a('formulario-airtable')">üìù Formulario Airtable</button>
            display: flex;
            background: #f8f9fa;
            border-bottom: 3px solid #4b6cb7;
            padding: 0 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #495057;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab-btn:hover {
            color: #4b6cb7;
            background: #e9ecef;
        }

        .tab-btn.active {
            color: #4b6cb7;
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 100%;
            height: 3px;
            background: #4b6cb7;
        }

        .tab-content {
            padding: 30px;
            min-height: 500px;
        }

        .tab-pane {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-pane.active {
            display: block;
        }

        h2 {
            color: #343a40;
            margin-bottom: 20px;
            border-bottom: 2px solid #4b6cb7;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #495057;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ced4da;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #4b6cb7;
            box-shadow: 0 0 0 3px rgba(75, 108, 183, 0.1);
        }

        button {
            background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.3s ease;
            margin: 5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        th {
            background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
            color: white;
            font-weight: 600;
        }

        tr:hover {
            background-color: #f8f9fa;
        }

        /* Modal de seguridad */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .modal h3 {
            color: #182848;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .modal input {
            margin: 15px 0;
            font-size: 18px;
            text-align: center;
        }

        .modal button {
            margin-top: 10px;
            width: 100%;
        }

        .error-message {
            color: #dc3545;
            margin-top: 10px;
            display: none;
            font-weight: 600;
        }

        .success-message {
            color: #28a745;
            margin-top: 10px;
            font-weight: 600;
            padding: 10px;
            background: #d4edda;
            border-radius: 5px;
            display: none;
        }

        .disponibilidad-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .dia-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border: 2px solid #dee2e6;
        }

        .dia-card h3 {
            text-align: center;
            margin-bottom: 15px;
            color: #495057;
        }

        .filtros {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .login-form {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .user-info {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            text-align: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
            }
            
            .tab-btn {
                width: 100%;
                text-align: center;
            }
            
            .tab-content {
                padding: 20px;
            }
            
            .disponibilidad-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚öΩ Sistema de Gesti√≥n de Arbitraje</h1>
            <p>Plataforma integral para administraci√≥n de √°rbitros</p>
        </header>

       <div class="nav-tabs">
  <button class="tab-btn active" onclick="cambiarPesta√±a('login')">üîê Login</button>
  <button class="tab-btn" onclick="cambiarPesta√±a('registro')">üë• Registro √Årbitros</button>
  <button class="tab-btn" onclick="verificarAcceso('disponibilidad')">üìä Mi Disponibilidad</button>
  <button class="tab-btn" onclick="solicitarAccesoAdmin('disponibilidad-general')">üåê Disponibilidad General</button>
  <button class="tab-btn" onclick="solicitarAccesoAdmin('estadisticas')">üìà Estad√≠sticas</button>
  <button class="tab-btn" onclick="cambiarPesta√±a('formulario-airtable')">üìù Formulario Airtable</button>
</div>

            <!-- Pesta√±a de Formulario Airtable -->
<div id="formulario-airtable" class="tab-pane">
  <h2>üìù Registro de Disponibilidad v√≠a Airtable</h2>
  <p>Complete el siguiente formulario para registrar su disponibilidad como √°rbitro:</p>
 <iframe 
  src="https://airtable.com/app0oO9e0zIX0F4kO/pagRsfuknfLobdPR3/form?share=show" 
  width="100%" 
  height="800" 
  frameborder="0" 
  style="border: 1px solid #ccc; border-radius: 8px;">
</iframe>

</div>

        </div>

        <div class="tab-content">
            <!-- Pesta√±a de Login -->
            <div id="login" class="tab-pane active">
                <div class="login-form">
                    <h2>üîê Iniciar Sesi√≥n</h2>
                    <div class="form-group">
                        <label for="login-email">Email:</label>
                        <input type="email" id="login-email" placeholder="tu@email.com">
                    </div>
                    <div class="form-group">
                        <label for="login-password">Clave Personal:</label>
                        <input type="password" id="login-password" placeholder="Tu clave personal">
                    </div>
                    <button onclick="iniciarSesion()">üöÄ Ingresar</button>
                    <p id="login-error" class="error-message">Credenciales incorrectas</p>
                </div>
            </div>

            <!-- Pesta√±a de Registro -->
            <div id="registro" class="tab-pane">
                <h2>üìù Registro de Nuevos √Årbitros</h2>
                <div class="form-group">
                    <label for="nombre">Nombre Completo:</label>
                    <input type="text" id="nombre" placeholder="Ingrese el nombre completo">
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" placeholder="ejemplo@email.com">
                </div>
                <div class="form-group">
                    <label for="celular">Celular:</label>
                    <input type="tel" id="celular" placeholder="+57 300 123 4567">
                </div>
                <div class="form-group">
                    <label for="ciudad">Ciudad:</label>
                    <input type="text" id="ciudad" placeholder="Ciudad de residencia">
                </div>
                <div class="form-group">
                    <label for="categoria">Categor√≠a:</label>
                    <select id="categoria">
                        <option value="">Seleccione categor√≠a</option>
                        <option value="ARBITRO">√Årbitro</option>
                        <option value="PLANILLERO">Planillero</option>
                        <option value="ASPIRANTE">Aspirante</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="clave-personal">Clave Personal:</label>
                    <input type="password" id="clave-personal" placeholder="Crear clave personal">
                    <script>
  function cambiarPesta√±a(id) {
    document.querySelectorAll('.tab-pane').forEach(p => p.style.display = 'none');
    document.getElementById(id).style.display = 'block';
  }

  // Mostrar la primera pesta√±a por defecto al cargar
  window.onload = () => cambiarPesta√±a('estadisticas');
</script>

                </div>
                function registrarArbitro() {
  const nombre = document.getElementById('nombre').value.trim();
  const email = document.getElementById('email').value.trim();
  const celular = document.getElementById('celular').value.trim();
  const ciudad = document.getElementById('ciudad').value.trim();
  const categoria = document.getElementById('categoria').value;
  const clave = document.getElementById('clave-personal').value;
  const confirmarClave = document.getElementById('confirmar-clave').value;

  // Validaciones
  if (!nombre || !email || !clave || !confirmarClave) {
    alert('‚ö†Ô∏è Por favor complete todos los campos obligatorios');
    return;
  }

  if (!email.includes('@') || !email.includes('.')) {
    alert('üìß Email inv√°lido');
    return;
  }

  if (clave.length < 6) {
    alert('üîê La clave debe tener al menos 6 caracteres');
    return;
  }

  if (clave !== confirmarClave) {
    alert('‚ùå Las claves no coinciden');
    return;
  }

  if (arbitros.find(a => a.email === email)) {
    alert('‚ö†Ô∏è Este email ya est√° registrado');
    return;
  }

  const arbitro = { nombre, email, celular, ciudad, categoria, clave };
  arbitros.push(arbitro);
  localStorage.setItem('arbitros', JSON.stringify(arbitros));

  document.getElementById('registro-success').style.display = 'block';
  setTimeout(() => {
    document.getElementById('registro-success').style.display = 'none';
  }, 3000);

  // Limpiar formulario
  document.getElementById('nombre').value = '';
  document.getElementById('email').value = '';
  document.getElementById('celular').value = '';
  document.getElementById('ciudad').value = '';
  document.getElementById('categoria').value = '';
  document.getElementById('clave-personal').value = '';
  document.getElementById('confirmar-clave').value = '';
}


            <!-- Pesta√±a de Disponibilidad Semanal -->
            <div id="disponibilidad" class="tab-pane">
                <div class="user-info" id="user-info">
                    <!-- Aqu√≠ se mostrar√° la info del usuario -->
                </div>
                <h2>üìä Mi Disponibilidad Semanal</h2>
                <p>Seleccione su disponibilidad para cada d√≠a:</p>
                
                <div class="disponibilidad-grid">
                    <!-- Los d√≠as se mantienen igual -->
                    <div class="dia-card">
                        <h3>Lunes</h3>
                        <select id="lunes" onchange="toggleHorario('lunes')">
                            <option value="">Seleccionar</option>
                            <option value="COMPLETA">Disponibilidad Completa</option>
                            <option value="ESPECIAL">Horario Especial</option>
                            <option value="NO">No Disponible</option>
                        </select>
                        <div id="lunes-horario" style="display: none; margin-top: 10px;">
                            <label>Horario espec√≠fico:</label>
                            <input type="time" id="lunes-inicio"> a 
                            <input type="time" id="lunes-fin">
                        </div>
                    </div>

                    <div class="dia-card">
                        <h3>Martes</h3>
                        <select id="martes" onchange="toggleHorario('martes')">
                            <option value="">Seleccionar</option>
                            <option value="COMPLETA">Disponibilidad Completa</option>
                            <option value="ESPECIAL">Horario Especial</option>
                            <option value="NO">No Disponible</option>
                        </select>
                        <div id="martes-horario" style="display: none; margin-top: 10px;">
                            <label>Horario espec√≠fico:</label>
                            <input type="time" id="martes-inicio"> a 
                            <input type="time" id="martes-fin">
                        </div>
                    </div>

                    <div class="dia-card">
                        <h3>Mi√©rcoles</h3>
                        <select id="miercoles" onchange="toggleHorario('miercoles')">
                            <option value="">Seleccionar</option>
                            <option value="COMPLETA">Disponibilidad Completa</option>
                            <option value="ESPECIAL">Horario Especial</option>
                            <option value="NO">No Disponible</option>
                        </select>
                        <div id="miercoles-horario" style="display: none; margin-top: 10px;">
                            <label>Horario espec√≠fico:</label>
                            <input type="time" id="miercoles-inicio"> a 
                            <input type="time" id="miercoles-fin">
                        </div>
                    </div>

                    <div class="dia-card">
                        <h3>Jueves</h3>
                        <select id="jueves" onchange="toggleHorario('jueves')">
                            <option value="">Seleccionar</option>
                            <option value="COMPLETA">Disponibilidad Completa</option>
                            <option value="ESPECIAL">Horario Especial</option>
                            <option value="NO">No Disponible</option>
                        </select>
                        <div id="jueves-horario" style="display: none; margin-top: 10px;">
                            <label>Horario espec√≠fico:</label>
                            <input type="time" id="jueves-inicio"> a 
                            <input type="time" id="jueves-fin">
                        </div>
                    </div>

                    <div class="dia-card">
                        <h3>Viernes</h3>
                        <select id="viernes" onchange="toggleHorario('viernes')">
                            <option value="">Seleccionar</option>
                            <option value="COMPLETA">Disponibilidad Completa</option>
                            <option value="ESPECIAL">Horario Especial</option>
                            <option value="NO">No Disponible</option>
                        </select>
                        <div id="viernes-horario" style="display: none; margin-top: 10px;">
                            <label>Horario espec√≠fico:</label>
                            <input type="time" id="viernes-inicio"> a 
                            <input type="time" id="viernes-fin">
                        </div>
                    </div>

                    <div class="dia-card">
                        <h3>S√°bado</h3>
                        <select id="sabado" onchange="toggleHorario('sabado')">
                            <option value="">Seleccionar</option>
                            <option value="COMPLETA">Disponibilidad Completa</option>
                            <option value="ESPECIAL">Horario Especial</option>
                            <option value="NO">No Disponible</option>
                        </select>
                        <div id="sabado-horario" style="display: none; margin-top: 10px;">
                            <label>Horario espec√≠fico:</label>
                            <input type="time" id="sabado-inicio"> a 
                            <input type="time" id="sabado-fin">
                        </div>
                    </div>

                    <div class="dia-card">
                        <h3>Domingo</h3>
                        <select id="domingo" onchange="toggleHorario('domingo')">
                            <option value="">Seleccionar</option>
                            <option value="COMPLETA">Disponibilidad Completa</option>
                            <option value="ESPECIAL">Horario Especial</option>
                            <option value="NO">No Disponible</option>
                        </select>
                        <div id="domingo-horario" style="display: none; margin-top: 10px;">
                            <label>Horario espec√≠fico:</label>
                            <input type="time" id="domingo-inicio"> a 
                            <input type="time" id="domingo-fin">
                        </div>
                    </div>
                </div>

                <button onclick="guardarDisponibilidad()">üíæ Guardar Disponibilidad</button>
                <div id="disponibilidad-success" class="success-message">‚úÖ Disponibilidad guardada exitosamente!</div>
            </div>

            <!-- Pesta√±a de Disponibilidad General -->
            <div id="disponibilidad-general" class="tab-pane">
                <h2>üåê Disponibilidad General</h2>
                
                <div class="filtros">
                    <div class="form-group">
                        <label for="filtro-arbitro">Filtrar por √Årbitro:</label>
                        <select id="filtro-arbitro">
                            <option value="">Todos los √°rbitros</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filtro-ciudad">Filtrar por Ciudad:</label>
                        <select id="filtro-ciudad">
                            <option value="">Todas las ciudades</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filtro-dia">Filtrar por D√≠a:</label>
                        <select id="filtro-dia">
                            <option value="">Todos los d√≠as</option>
                            <option value="LUNES">Lunes</option>
                            <option value="MARTES">Martes</option>
                            <option value="MIERCOLES">Mi√©rcoles</option>
                            <option value="JUEVES">Jueves</option>
                            <option value="VIERNES">Viernes</option>
                            <option value="SABADO">S√°bado</option>
                            <option value="DOMINGO">Domingo</option>
                        </select>
                    </div>
                    <button onclick="aplicarFiltros()">üîç Aplicar Filtros</button>
                    <button onclick="cargarTodaDisponibilidad()" style="background: #28a745;">üîÑ Cargar Todo</button>
                </div>

                <div id="resultados-disponibilidad">
                    <p>Seleccione "Cargar Todo" o aplique filtros para ver los resultados...</p>
                </div>
            </div>
<!-- üîò Botones de navegaci√≥n entre pesta√±as -->
<div class="tab-buttons" style="margin-bottom: 20px;">
  <button class="tab-btn" onclick="cambiarPesta√±a('estadisticas')">üìà Estad√≠sticas</button>
  <button class="tab-btn" onclick="cambiarPesta√±a('formulario-airtable')">üìù Formulario Airtable</button>
</div>

            <!-- Pesta√±a de Estad√≠sticas -->
            <div id="estadisticas" class="tab-pane">
                <h2>üìà Estad√≠sticas de Disponibilidad</h2>
                <div class="form-group">
                    <label for="semana-estadistica">Seleccionar Semana:</label>
                    <input type="week" id="semana-estadistica">
                </div>
                <button onclick="generarEstadisticas()">üìä Generar Estad√≠sticas</button>
                                <div id="grafico-estadisticas" style="margin-top: 30px;">
                    <canvas id="estadisticasChart" width="400" height="200"></canvas>
                    <!-- Pesta√±a de Estad√≠sticas -->
<div id="estadisticas" class="tab-pane">...
<!-- Pesta√±a de Formulario Airtable -->
<div id="formulario-airtable" class="tab-pane">
  <h2>üìù Registro de Disponibilidad v√≠a Airtable</h2>
  <p>Hac√© clic en el bot√≥n para abrir el formulario en una nueva pesta√±a:</p>
  <a href="https://airtable.com/app0oO9e0zIX0F4kO/pagRsfuknfLobdPR3/form?share=show" target="_blank">
    <button style="padding: 10px 20px; font-size: 16px;">üìù Abrir Formulario Airtable</button>
  </a>
</div>
</div>
    </div> <!-- cierre de tab-content -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Seguridad -->
    <div id="modalSeguridad" class="modal">
        <div class="modal-content">
            <h3>üîí Acceso Restringido</h3>
            <p>Ingrese la clave de seguridad para acceder:</p>
            <input type="password" id="claveAcceso" placeholder="Clave de seguridad">
            <button onclick="verificarClave()">üîì Acceder</button>
            <p id="mensajeError" class="error-message">‚ùå Clave incorrecta. Intente nuevamente.</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Base de datos simulada
        let arbitros = JSON.parse(localStorage.getItem('arbitros')) || [];
        let disponibilidades = JSON.parse(localStorage.getItem('disponibilidades')) || [];
        let usuarioLogueado = null;
        const CLAVE_ADMIN = "admin123";

        // Inicializar selects de filtros
        function inicializarFiltros() {
            const selectArbitro = document.getElementById('filtro-arbitro');
            const selectCiudad = document.getElementById('filtro-ciudad');
            
            // Limpiar selects
            selectArbitro.innerHTML = '<option value="">Todos los √°rbitros</option>';
            selectCiudad.innerHTML = '<option value="">Todas las ciudades</option>';
            
            const ciudades = new Set();
            
            arbitros.forEach(arbitro => {
                // Agregar √°rbitro
                const option = document.createElement('option');
                option.value = arbitro.email;
                option.textContent = arbitro.nombre;
                selectArbitro.appendChild(option);
                
                // Agregar ciudad
                ciudades.add(arbitro.ciudad);
            });
            
            ciudades.forEach(ciudad => {
                const option = document.createElement('option');
                option.value = ciudad;
                option.textContent = ciudad;
                selectCiudad.appendChild(option);
            });
        }

        function cambiarPesta√±a(idPesta√±a) {
            console.log('Cambiando a pesta√±a:', idPesta√±a);
            
            // Quitar clase active de todos los botones
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Agregar clase active al bot√≥n clickeado
            const botones = document.querySelectorAll(`[onclick*="${idPesta√±a}"]`);
            if (botones.length > 0) {
                botones[0].classList.add('active');
            }
            
            // Ocultar todas las pesta√±as
            document.querySelectorAll('.tab-pane').forEach(pesta√±a => {
                pesta√±a.classList.remove('active');
            });
            
            // Mostrar la pesta√±a seleccionada
            const pesta√±a = document.getElementById(idPesta√±a);
            if (pesta√±a) {
                pesta√±a.classList.add('active');
            }
            
            // Inicializar filtros si es la pesta√±a de disponibilidad general
            if (idPesta√±a === 'disponibilidad-general') {
                inicializarFiltros();
                cargarTodaDisponibilidad();
            }
        }

        function verificarAcceso(idPesta√±a) {
            console.log('Verificando acceso a:', idPesta√±a);
            
            if (idPesta√±a === 'disponibilidad') {
                if (!usuarioLogueado) {
                    alert('‚ö†Ô∏è Debe iniciar sesi√≥n primero para acceder a su disponibilidad');
                    cambiarPesta√±a('login');
                    return;
                }
            }
            cambiarPesta√±a(idPesta√±a);
        }

        function solicitarAccesoAdmin(idPesta√±a) {
            console.log('Solicitando acceso admin a:', idPesta√±a);
            
            pesta√±aPendiente = idPesta√±a;
            document.getElementById('modalSeguridad').style.display = 'block';
            document.getElementById('claveAcceso').value = '';
            document.getElementById('mensajeError').style.display = 'none';
        }

        function verificarClave() {
            const claveIngresada = document.getElementById('claveAcceso').value;
            
            if (claveIngresada === CLAVE_ADMIN) {
                document.getElementById('modalSeguridad').style.display = 'none';
                cambiarPesta√±a(pesta√±aPendiente);
            } else {
                document.getElementById('mensajeError').style.display = 'block';
            }
        }

        function toggleHorario(dia) {
            const seleccion = document.getElementById(dia).value;
            const horarioDiv = document.getElementById(`${dia}-horario`);
            
            if (seleccion === 'ESPECIAL') {
                horarioDiv.style.display = 'block';
            } else {
                horarioDiv.style.display = 'none';
            }
        }

        function registrarArbitro() {
            const arbitro = {
                nombre: document.getElementById('nombre').value,
                email: document.getElementById('email').value,
                celular: document.getElementById('celular').value,
                ciudad: document.getElementById('ciudad').value,
                categoria: document.getElementById('categoria').value,
                clave: document.getElementById('clave-personal').value
            };
            
            // Validaciones
            if (!arbitro.nombre || !arbitro.email || !arbitro.clave) {
                alert('Por favor complete todos los campos obligatorios');
                return;
            }
            
            // Verificar si el email ya existe
            if (arbitros.find(a => a.email === arbitro.email)) {
                alert('Este email ya est√° registrado');
                return;
            }
            
            arbitros.push(arbitro);
            localStorage.setItem('arbitros', JSON.stringify(arbitros));
            
            document.getElementById('registro-success').style.display = 'block';
            setTimeout(() => {
                document.getElementById('registro-success').style.display = 'none';
            }, 3000);
            
            // Limpiar formulario
            document.getElementById('nombre').value = '';
            document.getElementById('email').value = '';
            document.getElementById('celular').value = '';
            document.getElementById('ciudad').value = '';
            document.getElementById('categoria').value = '';
            document.getElementById('clave-personal').value = '';
        }

        function iniciarSesion() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            const arbitro = arbitros.find(a => a.email === email && a.clave === password);
            
            if (arbitro) {
                usuarioLogueado = arbitro;
                document.getElementById('login-error').style.display = 'none';
                
                // Actualizar info de usuario
                document.getElementById('user-info').innerHTML = `
                    <strong>üë§ Usuario:</strong> ${usuarioLogueado.nombre} | 
                    <strong>üìß Email:</strong> ${usuarioLogueado.email} | 
                    <strong>üèôÔ∏è Ciudad:</strong> ${usuarioLogueado.ciudad}
                `;
                
                cambiarPesta√±a('disponibilidad');
                cargarDisponibilidadUsuario();
            } else {
                document.getElementById('login-error').style.display = 'block';
            }
        }

        function cargarDisponibilidadUsuario() {
            if (!usuarioLogueado) return;
            
            const ultimaDisponibilidad = disponibilidades
                .filter(d => d.arbitro === usuarioLogueado.email)
                .sort((a, b) => new Date(b.semana) - new Date(a.semana))[0];
            
            if (ultimaDisponibilidad) {
                const dias = ['lunes', 'martes', 'miercoles', 'jueves', 'viernes', 'sabado', 'domingo'];
                
                dias.forEach(dia => {
                    const disponibilidadDia = ultimaDisponibilidad.dias[dia.toUpperCase()];
                    if (disponibilidadDia) {
                        document.getElementById(dia).value = disponibilidadDia.disponibilidad;
                        
                        if (disponibilidadDia.disponibilidad === 'ESPECIAL' && disponibilidadDia.horario) {
                            document.getElementById(`${dia}-inicio`).value = disponibilidadDia.horario.inicio;
                            document.getElementById(`${dia}-fin`).value = disponibilidadDia.horario.fin;
                            document.getElementById(`${dia}-horario`).style.display = 'block';
                        }
                    }
                });
            }
        }

        function guardarDisponibilidad() {
            if (!usuarioLogueado) {
                alert('Debe iniciar sesi√≥n primero');
                return;
            }
            
            const dias = ['lunes', 'martes', 'miercoles', 'jueves', 'viernes', 'sabado', 'domingo'];
            const disponibilidad = {
                arbitro: usuarioLogueado.email,
                semana: new Date().toISOString().split('T')[0],
                dias: {}
            };
            
            dias.forEach(dia => {
                const seleccion = document.getElementById(dia).value;
                disponibilidad.dias[dia.toUpperCase()] = {
                    disponibilidad: seleccion
                };
                
                if (seleccion === 'ESPECIAL') {
                    disponibilidad.dias[dia.toUpperCase()].horario = {
                        inicio: document.getElementById(`${dia}-inicio`).value,
                        fin: document.getElementById(`${dia}-fin`).value
                    };
                }
            });
            
            // Eliminar disponibilidad existente para esta semana
            disponibilidades = disponibilidades.filter(d => 
                !(d.arbitro === usuarioLogueado.email && d.semana === disponibilidad.semana)
            );
            
            disponibilidades.push(disponibilidad);
            localStorage.setItem('disponibilidades', JSON.stringify(disponibilidades));
            
            document.getElementById('disponibilidad-success').style.display = 'block';
            setTimeout(() => {
                document.getElementById('disponibilidad-success').style.display = 'none';
            }, 3000);
        }

        function cargarTodaDisponibilidad() {
            aplicarFiltros();
        }

        function aplicarFiltros() {
            const arbitro = document.getElementById('filtro-arbitro').value;
            const ciudad = document.getElementById('filtro-ciudad').value;
            const dia = document.getElementById('filtro-dia').value;
            
            let resultados = disponibilidades.filter(d => {
                const infoArbitro = arbitros.find(a => a.email === d.arbitro);
                if (!infoArbitro) return false;
                
                if (arbitro && d.arbitro !== arbitro) return false;
                if (ciudad && infoArbitro.ciudad !== ciudad) return false;
                if (dia && !d.dias[dia]) return false;
                
                return true;
            });
            
            mostrarResultados(resultados);
        }

        function mostrarResultados(resultados) {
            const contenedor = document.getElementById('resultados-disponibilidad');
            
            if (resultados.length === 0) {
                contenedor.innerHTML = '<p>No se encontraron resultados con los filtros aplicados</p>';
                return;
            }
            
            let html = '<table><tr><th>√Årbitro</th><th>Ciudad</th><th>Lunes</th><th>Martes</th><th>Mi√©rcoles</th><th>Jueves</th><th>Viernes</th><th>S√°bado</th><th>Domingo</th></tr>';
            
            resultados.forEach(resultado => {
                const infoArbitro = arbitros.find(a => a.email === resultado.arbitro);
                html += `<tr>
                    <td>${infoArbitro.nombre}</td>
                    <td>${infoArbitro.ciudad}</td>`;
                
                ['LUNES', 'MARTES', 'MIERCOLES', 'JUEVES', 'VIERNES', 'SABADO', 'DOMINGO'].forEach(dia => {
                    const disp = resultado.dias[dia];
                    if (disp) {
                        let texto = disp.disponibilidad;
                        if (disp.disponibilidad === 'ESPECIAL' && disp.horario) {
                            texto = `${disp.horario.inicio} - ${disp.horario.fin}`;
                        }
                        html += `<td>${texto}</td>`;
                    } else {
                        html += '<td>-</td>';
                    }
                });
                
                html += '</tr>';
            });
            
            html += '</table>';
            contenedor.innerHTML = html;
        }
<!-- Pesta√±a de Estad√≠sticas -->
<div id="estadisticas" class="tab-pane">
  <h2>üìà Estad√≠sticas de Disponibilidad</h2>
  <div class="form-group">
    <label for="semana-estadistica">Seleccionar Semana:</label>
    <input type="week" id="semana-estadistica">
  </div>
  <button onclick="generarEstadisticas()">üìä Generar Estad√≠sticas</button>
  <div id="grafico-estadisticas" style="margin-top: 30px;">
    <canvas id="estadisticasChart" width="400" height="200"></canvas>
  </div>
</div>

        function generarEstadisticas() {
            const semana = document.getElementById('semana-estadistica').value;
            if (!semana) {
                alert('Seleccione una semana');
                return;
            }
            
            const disponibilidadesSemana = disponibilidades.filter(d => d.semana === semana);
            
            const stats = {
                COMPLETA: 0,
                ESPECIAL: 0,
                NO: 0
            };
            
            disponibilidadesSemana.forEach(disp => {
                Object.values(disp.dias).forEach(dia => {
                    if (dia.disponibilidad) {
                        stats[dia.disponibilidad]++;
                    }
                });
            });
            
            const ctx = document.getElementById('estadisticasChart').getContext('2d');
            if (window.estadisticasChartInstance) {
                window.estadisticasChartInstance.destroy();
            }
            
            window.estadisticasChartInstance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Disponibilidad Completa', 'Horario Especial', 'No Disponible'],
                    datasets: [{
                        data: [stats.COMPLETA, stats.ESPECIAL, stats.NO],
                        backgroundColor: ['#28a745', '#ffc107', '#dc3545']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: `Estad√≠sticas de Disponibilidad - Semana ${semana}`
                        }
                    }
                }
            });
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            inicializarFiltros();
            console.log('Sistema iniciado correctamente');
            console.log('√Årbitros registrados:', arbitros.length);
            console.log('Disponibilidades guardadas:', disponibilidades.length);
        });
   <script>
  function cambiarPesta√±a(id) {
    document.querySelectorAll('.tab-pane').forEach(p => p.style.display = 'none');
    document.getElementById(id).style.display = 'block';
  }

  // Mostrar la primera pesta√±a por defecto al cargar
  window.onload = () => cambiarPesta√±a('estadisticas');
</script>
</body>
</html>











